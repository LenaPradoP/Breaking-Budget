{% extends 'base.html' %}

{% block title %}Travelers{% endblock %}

{% block content %}

    <!-- Flash messages if errors -->
  {% if messages %}
    <ul class="errorlist">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  <!-- Filters (GET) â€” shown once, above the table -->
  <form method="get" class="filter-bar">
    {{ form.role }}
    {{ form.order_by }}
    <button type="submit">Apply Filters</button>
  </form>

  <table class="users-table">
    <tbody>
      {% for user in users %}
        <tr>
          <td class="fullname">{{ user.first_name }} {{ user.last_name }}</td>
          <td class="email">{{ user.email }}</td>
          <td class="role">{{ user.role }}</td>
          <td class="actions">
            <form method="get" action="{% url 'users:user_detail' user.pk %}">
              <button type="submit">View Details</button>
            </form>
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="4">No users yet.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

    {% endblock %}
